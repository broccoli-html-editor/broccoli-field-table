/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={702:function(t,n,e){var r=e(155);t.exports=function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function n(t){return"function"==typeof t}var i=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=0,s=void 0,u=void 0,c=function(t,n){b[o]=t,b[o+1]=n,2===(o+=2)&&(u?u(x):A())};function a(t){u=t}function f(t){c=t}var l="undefined"!=typeof window?window:void 0,h=l||{},d=h.MutationObserver||h.WebKitMutationObserver,v="undefined"==typeof self&&void 0!==r&&"[object process]"==={}.toString.call(r),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function m(){return function(){return r.nextTick(x)}}function w(){return function(){s(x)}}function g(){var t=0,n=new d(x),e=document.createTextNode("");return n.observe(e,{characterData:!0}),function(){e.data=t=++t%2}}function y(){var t=new MessageChannel;return t.port1.onmessage=x,function(){return t.port2.postMessage(0)}}function _(){var t=setTimeout;return function(){return t(x,1)}}var b=new Array(1e3);function x(){for(var t=0;t<o;t+=2)(0,b[t])(b[t+1]),b[t]=void 0,b[t+1]=void 0;o=0}function T(){try{var t=e(327);return s=t.runOnLoop||t.runOnContext,w()}catch(t){return _()}}var A=void 0;function S(t,n){var e=arguments,r=this,i=new this.constructor(j);void 0===i[P]&&Z(i);var o,s=r._state;return s?(o=e[s-1],c((function(){return W(s,i,o,r._result)}))):z(r,i,t,n),i}function k(t){var n=this;if(t&&"object"==typeof t&&t.constructor===n)return t;var e=new n(j);return N(e,t),e}A=v?m():d?g():p?y():void 0===l?T():_();var P=Math.random().toString(36).substring(16);function j(){}var E=void 0,C=1,L=2,O=new K;function M(){return new TypeError("You cannot resolve a promise with itself")}function D(){return new TypeError("A promises callback cannot return that same promise.")}function F(t){try{return t.then}catch(t){return O.error=t,O}}function B(t,n,e,r){try{t.call(n,e,r)}catch(t){return t}}function $(t,n,e){c((function(t){var r=!1,i=B(e,n,(function(e){r||(r=!0,n!==e?N(t,e):q(t,e))}),(function(n){r||(r=!0,J(t,n))}),"Settle: "+(t._label||" unknown promise"));!r&&i&&(r=!0,J(t,i))}),t)}function G(t,n){n._state===C?q(t,n._result):n._state===L?J(t,n._result):z(n,void 0,(function(n){return N(t,n)}),(function(n){return J(t,n)}))}function I(t,e,r){e.constructor===t.constructor&&r===S&&e.constructor.resolve===k?G(t,e):r===O?J(t,O.error):void 0===r?q(t,e):n(r)?$(t,e,r):q(t,e)}function N(n,e){n===e?J(n,M()):t(e)?I(n,e,F(e)):q(n,e)}function Y(t){t._onerror&&t._onerror(t._result),H(t)}function q(t,n){t._state===E&&(t._result=n,t._state=C,0!==t._subscribers.length&&c(H,t))}function J(t,n){t._state===E&&(t._state=L,t._result=n,c(Y,t))}function z(t,n,e,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=n,i[o+C]=e,i[o+L]=r,0===o&&t._state&&c(H,t)}function H(t){var n=t._subscribers,e=t._state;if(0!==n.length){for(var r=void 0,i=void 0,o=t._result,s=0;s<n.length;s+=3)r=n[s],i=n[s+e],r?W(e,r,i,o):i(o);t._subscribers.length=0}}function K(){this.error=null}var R=new K;function U(t,n){try{return t(n)}catch(t){return R.error=t,R}}function W(t,e,r,i){var o=n(r),s=void 0,u=void 0,c=void 0,a=void 0;if(o){if((s=U(r,i))===R?(a=!0,u=s.error,s=null):c=!0,e===s)return void J(e,D())}else s=i,c=!0;e._state!==E||(o&&c?N(e,s):a?J(e,u):t===C?q(e,s):t===L&&J(e,s))}function Q(t,n){try{n((function(n){N(t,n)}),(function(n){J(t,n)}))}catch(n){J(t,n)}}var V=0;function X(){return V++}function Z(t){t[P]=V++,t._state=void 0,t._result=void 0,t._subscribers=[]}function tt(t,n){this._instanceConstructor=t,this.promise=new t(j),this.promise[P]||Z(this.promise),i(n)?(this._input=n,this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?q(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&q(this.promise,this._result))):J(this.promise,nt())}function nt(){return new Error("Array Methods must be provided an Array")}function et(t){return new tt(this,t).promise}function rt(t){var n=this;return i(t)?new n((function(e,r){for(var i=t.length,o=0;o<i;o++)n.resolve(t[o]).then(e,r)})):new n((function(t,n){return n(new TypeError("You must pass an array to race."))}))}function it(t){var n=new this(j);return J(n,t),n}function ot(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function st(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function ut(t){this[P]=X(),this._result=this._state=void 0,this._subscribers=[],j!==t&&("function"!=typeof t&&ot(),this instanceof ut?Q(this,t):st())}function ct(){var t=void 0;if(void 0!==e.g)t=e.g;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(t){}if("[object Promise]"===r&&!n.cast)return}t.Promise=ut}return tt.prototype._enumerate=function(){for(var t=this.length,n=this._input,e=0;this._state===E&&e<t;e++)this._eachEntry(n[e],e)},tt.prototype._eachEntry=function(t,n){var e=this._instanceConstructor,r=e.resolve;if(r===k){var i=F(t);if(i===S&&t._state!==E)this._settledAt(t._state,n,t._result);else if("function"!=typeof i)this._remaining--,this._result[n]=t;else if(e===ut){var o=new e(j);I(o,t,i),this._willSettleAt(o,n)}else this._willSettleAt(new e((function(n){return n(t)})),n)}else this._willSettleAt(r(t),n)},tt.prototype._settledAt=function(t,n,e){var r=this.promise;r._state===E&&(this._remaining--,t===L?J(r,e):this._result[n]=e),0===this._remaining&&q(r,this._result)},tt.prototype._willSettleAt=function(t,n){var e=this;z(t,void 0,(function(t){return e._settledAt(C,n,t)}),(function(t){return e._settledAt(L,n,t)}))},ut.all=et,ut.race=rt,ut.resolve=k,ut.reject=it,ut._setScheduler=a,ut._setAsap=f,ut._asap=c,ut.prototype={constructor:ut,then:S,catch:function(t){return this.then(null,t)}},ct(),ut.polyfill=ct,ut.Promise=ut,ut}()},944:(t,n,e)=>{!function(t){var n=e(702).Promise;t.exports=function(t,e,r){var i=1;return arguments.length>=4&&(t=arguments[0],i=arguments[1],e=arguments[arguments.length-2],r=arguments[arguments.length-1]),new function(t,e,r,i){for(var o in this.idx=-1,this.idxs=[],t)this.idxs.push(o);this.bundle=e||1,this.bundleProgress=1,this.ary=t||[],this.fnc=r||function(){},this.completed=!1,this.fncComplete=i||function(){},this.next=function(){var t=this;return new n((function(t){t()})).then((function(){return new n((function(n,e){if(t.bundleProgress--,!(t.bundleProgress>0))if(t.idx+1>=t.idxs.length&&t.bundleProgress<=0)t.destroy();else{var r=t.idx;t.idx=t.idx+t.bundle;for(var i=0;i<t.bundle&&!(++r>=t.idxs.length);i++)t.bundleProgress++,t.fnc(t,t.ary[t.idxs[r]],t.idxs[r])}}))})),this},this.break=function(){this.destroy()},this.destroy=function(){var t=this;t.idx=t.idxs.length-1,t.bundleProgress=0,t.completed||(t.completed=!0,t.fncComplete())},this.next()}(t,i=i||1,e,r)}}(t=e.nmd(t))},187:(t,n,e)=>{!function(t){var n=e(702).Promise;t.exports=function(t){var e="explicit",r=void 0;function i(t){t=t||[];var e=this;for(var r in e.idx=0,e.idxs=[],t)e.idxs.push(r);for(var r in e.idxsidxs={},e.idxs)e.idxsidxs[e.idxs[r]]=r;e.funcs=t;var i=!1;this.start=function(t){var e=this;i||(i=!0,new n((function(t){t()})).then((function(){return new n((function(n,r){e.next(t)}))})))},this.next=function(t){var e=this;t=t||{},e.idxs.length<=e.idx||new n((function(t){t()})).then((function(){return new n((function(n,r){e.funcs[e.idxs[e.idx++]](e,t)}))}))},this.goto=function(t,e){var r=this;r.idx=r.idxsidxs[t],e=e||{},r.idxs.length<=r.idx||new n((function(t){t()})).then((function(){return new n((function(t,n){r.funcs[r.idxs[r.idx++]](r,e)}))}))},this.break=function(){this.destroy()},this.destroy=function(){}}arguments.length>=2&&(e="implicit",r=arguments[0],t=arguments[arguments.length-1]);var o=new i(t);return"implicit"==e?(o.start(r),o):o}}(t=e.nmd(t))},844:(t,n,e)=>{!function(t){t.exports.ary=e(944),t.exports.fnc=e(187),t.exports.queue=e(140)}(t=e.nmd(t))},140:(t,n,e)=>{var r=e(702).Promise;t.exports=function(t){var n,i={},o=[],s=[],u={};(i=t||{}).process=t.process||function(t,n){n()},i.threadLimit=t.threadLimit||1;for(var c=0;c<i.threadLimit;c++)s.push({active:!1});function a(t){t=t.toString();var n=e(557).createHash("md5");return n.update(t,"utf8"),n.digest("hex")}function f(){clearTimeout(n),o.length&&new r((function(t){t()})).then((function(){return new r((function(t,e){var r=!1;for(var c in s)if(!s[c].active){s[r=c].active=!0;break}if(!1!==r){var a=o.shift();if(99==u[a.id])return u[a.id]=void 0,delete u[a.id],s[r].active=!1,void f();u[a.id]=2,s[r].active=a.id,i.process(a.data,(function(){u[a.id]=void 0,delete u[a.id],s[r].active=!1,f()}),{id:a.id})}else n=setTimeout((function(){f()}),10)}))}))}this.push=function(t){for(var n;;){var e=(new Date).getTime();if(n=e+"-"+a(e),!u[n])break}return o.push({id:n,data:t}),u[n]=1,f(),n},this.update=function(t,n){if("waiting"!=this.checkStatus(t))return!1;for(var e in o)if(o[e].id==t){o[e].data=n;break}return!0},this.remove=function(t){return"waiting"==this.checkStatus(t)&&(u[t]=99,!0)},this.checkStatus=function(t){u[t];switch(u[t]){case 1:return"waiting";case 2:return"progressing";case 99:return"removed"}return"undefined"},this.getAllStatus=function(){return u}}},155:t=>{var n,e,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(t){e=o}}();var u,c=[],a=!1,f=-1;function l(){a&&u&&(a=!1,u.length?c=u.concat(c):f=-1,c.length&&h())}function h(){if(!a){var t=s(l);a=!0;for(var n=c.length;n;){for(u=c,c=[];++f<n;)u&&u[f].run();f=-1,n=c.length}u=null,a=!1,function(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}(t)}}function d(t,n){this.fun=t,this.array=n}function v(){}r.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];c.push(new d(t,n)),1!==c.length||a||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},327:()=>{},557:()=>{}},n={};function e(r){var i=n[r];if(void 0!==i)return i.exports;var o=n[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),e.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),window.main=new function(){var t;e(844),window.biflora&&(t=this.socket=window.biflora.createSocket(this,io,{showSocketTest:function(t,n,e,r){n(t)}}));var n="biflora",r=new Broccoli;this.broccoli=window.broccoli=r,this.init=function(e,i){i=i||function(){},(e=e||{}).serverType&&(n=e.serverType),r.init({elmCanvas:$(".canvas").get(0),elmModulePalette:$(".palette").get(0),contents_area_selector:"[data-contents]",contents_bowl_name_by:"data-contents",customFields:{table:window.BroccoliFieldTable},gpiBridge:function(e,r,i){console.info("=----= GPI Request =----=",e,r);var o=(new Date).getTime();if("biflora"==n)t.send("broccoli",{api:"gpiBridge",bridge:{api:e,options:r}},(function(t){console.info("-- GPI result",(new Date).getTime()-o,t),i(t)}));else if("php"==n){var s;$.ajax({url:"./_api.php",method:"post",data:{api:e,options:JSON.stringify(r)},success:function(t){try{s=JSON.parse(t)}catch(n){console.error(n,t)}},error:function(t){console.error(t)},complete:function(){console.info("-- GPI result",(new Date).getTime()-o,s),i(s)}})}}},(function(){$(window).resize((function(){r.redraw()})),i()}))},this.socketTest=function(){return t.send("socketTest",{message:"socketTest from frontend."},(function(t){console.log(t)})),this}}})();